<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Second Quarter Examination â€” Presenter</title>
  <style>
    :root{
      --bg:#071634;
      --card:#081228;
      --accent:#0ea5a5;
      --gold:#F59E0B;
      --muted:#9aa7bf;
      --text:#ffffff;
      --timer-size:130px;   /* timer diameter */
      --timer-gap:28px;     /* safe gap so timer doesn't overlap */
    }
    html,body{height:100%;}
    body{
      margin:0;
      background:linear-gradient(180deg,var(--bg), #04203a 120%);
      color:var(--text);
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
      overflow:hidden;
    }

    .app{width:100%;max-width:1400px}

    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px}
    .brand{display:flex;gap:16px;align-items:center}
    .logo{width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,#0ea5a5,#2563eb);display:flex;align-items:center;justify-content:center;color:white;font-weight:800;font-size:18px}
    h1{font-size:22px;margin:0;color:var(--text)}
    .subtitle{color:var(--muted);font-size:13px}

    .card{background:transparent;border-radius:12px;padding:12px}

    /* Dashboard */
    .dashboard{display:flex;gap:14px;flex-wrap:wrap}
    .subject{flex:1 1 220px;min-width:220px;padding:16px;border-radius:12px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.04);cursor:pointer;display:flex;flex-direction:column;gap:8px}
    .subject h3{margin:0;font-size:18px;color:var(--text)}
    .subject p{margin:0;color:var(--muted);font-size:13px}
    .select-btn{margin-top:8px;padding:10px 14px;background:var(--accent);color:var(--card);border-radius:10px;border:none;font-weight:800;font-size:14px;cursor:pointer}

    /* Presenter */
    #presenter{display:none;margin-top:18px;position:relative;height:75vh}
    #presenter.active{display:block}

    /* Timer fixed (top-left) */
    #timerWrap{
      position:fixed;
      top:18px;
      left:18px;
      z-index:1400;
      display:flex;
      align-items:center;
      gap:12px;
      pointer-events:auto;
    }
    .timerCircle{
      width:var(--timer-size);
      height:var(--timer-size);
      border-radius:50%;
      background:linear-gradient(180deg,#06233a,#021826);
      display:grid;
      place-items:center;
      border:10px solid rgba(245,158,11,0.14);
      box-shadow: 0 18px 50px rgba(0,0,0,0.6), inset 0 -8px 30px rgba(0,0,0,0.25);
    }
    .timerText{font-size:36px;font-weight:900;color:var(--gold);text-shadow:0 3px 14px rgba(0,0,0,0.6)}
    .tinyControls{display:flex;flex-direction:column;gap:8px}
    .tinyBtn{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));color:var(--text);border:1px solid rgba(255,255,255,0.04);padding:10px;border-radius:10px;cursor:pointer;font-weight:800;min-width:56px;text-align:center}

    /* Presenter body padded to avoid timer overlap */
    .presenterBody{display:flex;gap:28px;align-items:flex-start;padding-left: calc(var(--timer-size) + var(--timer-gap));height:100%;box-sizing:border-box}

    .slide{
      flex:1;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:36px;box-shadow:0 20px 60px rgba(0,0,0,0.6);border:1px solid rgba(255,255,255,0.03);height:100%;overflow:auto;
    }

    .q-number{color:var(--muted);font-size:15px;margin-bottom:12px;font-weight:800}
    .q-text{
      font-size:40px;line-height:1.15;margin-bottom:26px;font-weight:900;color:var(--text);
      text-shadow:0 6px 20px rgba(0,0,0,0.6)
    }
    .options{display:block}
    .option{margin:12px 0;font-size:26px;color:var(--text);font-weight:800;background:rgba(255,255,255,0.02);padding:12px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.02);display:inline-block}

    /* Controls area centered bottom (fixed) */
    .controlsFixed{
      position:fixed;
      left:50%;
      transform:translateX(-50%);
      bottom:22px;
      z-index:1500;
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:center;
      padding:8px 12px;
      background:linear-gradient(180deg, rgba(0,0,0,0.1), rgba(255,255,255,0.02));
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.04);
      box-shadow:0 10px 30px rgba(0,0,0,0.6);
    }
    .controlBtn{padding:12px 16px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text);cursor:pointer;font-weight:900;font-size:15px}
    .controlBtn.primary{background:var(--gold);color:#071634;border:none;box-shadow:0 8px 18px rgba(245,158,11,0.12)}

    .progressSmall{font-size:14px;color:var(--muted);margin-left:8px}

    @media (max-width:1000px){
      .presenterBody{flex-direction:column;padding-left:18px}
      #timerWrap{left:auto;right:18px;top:18px}
      .timerCircle{width:110px;height:110px}
      .timerText{font-size:28px}
      .q-text{font-size:30px}
      .option{font-size:18px}
      .controlsFixed{flex-wrap:wrap;padding:10px}
    }

    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>

  <div class="app">
    <header>
      <div class="brand">
        <div class="logo">SQ</div>
        <div>
          <h1>Second Quarter Examination</h1>
          <div class="subtitle">Presenter-only â€¢ 60s per question â€¢ Bold & large</div>
        </div>
      </div>
      <div class="subtitle">Auto-advance â€¢ TTS â€¢ Fullscreen â€¢ Restart</div>
    </header>

    <main class="card">
      <!-- Dashboard -->
      <div id="dashboard" class="dashboard">
        <div class="subject" data-id="eng7">
          <h3>English 7</h3>
          <p>50-item exam â€” ready for presentation</p>
          <button class="select-btn" onclick="selectSubject('eng7')">Select</button>
        </div>
        <div class="subject" data-id="cnf12">
          <h3>CNF 12</h3>
          <p>50-item Creative Nonfiction exam</p>
          <button class="select-btn" onclick="selectSubject('cnf12')">Select</button>
        </div>
        <div class="subject" data-id="ppg11">
          <h3>PPG 11</h3>
          <p>(empty)</p>
          <button class="select-btn" onclick="selectSubject('ppg11')">Select</button>
        </div>
        <div class="subject" data-id="mil12">
          <h3>MIL 12</h3>
          <p>(empty)</p>
          <button class="select-btn" onclick="selectSubject('mil12')">Select</button>
        </div>
      </div>

      <!-- Start area -->
      <div id="startArea" style="margin-top:18px; display:none">
        <button id="startExamBtn" class="select-btn" style="font-size:16px;padding:12px 20px" onclick="startExam()">Start Exam</button>
      </div>

      <!-- Presenter -->
      <section id="presenter" aria-hidden="true">
        <div id="timerWrap" style="display:none">
          <div class="timerCircle" role="timer" aria-live="polite">
            <div class="timerText" id="timerText">60s</div>
          </div>
          <div style="display:flex;flex-direction:column;gap:8px;align-items:center">
            <button id="ttsBtn" class="tinyBtn" title="Read question aloud">ðŸ”Š Read</button>
            <button id="fsBtn" class="tinyBtn" title="Toggle full screen">â›¶</button>
            <div style="font-size:12px;color:var(--muted);margin-top:6px">Time left</div>
          </div>
        </div>

        <div class="presenterBody" id="presenterBody">
          <div class="slide" id="slide">
            <div class="q-number" id="qNumber">Question 1 of 50</div>
            <div class="q-text" id="qText">Loadingâ€¦</div>
            <div class="options" id="options"></div>
          </div>
        </div>

        <!-- Controls centered fixed below -->
        <div class="controlsFixed" role="region" aria-label="Exam controls">
          <button id="prevBtn" class="controlBtn" onclick="prevQuestion()">â—€ Prev</button>
          <button id="pauseBtn" class="controlBtn" onclick="togglePause()">Pause</button>
          <button id="nextBtn" class="controlBtn primary" onclick="nextQuestion()">Next â–¶</button>
          <button id="restartBtn" class="controlBtn" onclick="restartExam()" style="display:none">Restart</button>
          <button id="readBtn" class="controlBtn" onclick="speakCurrent()">ðŸ”Š Read</button>
          <button id="fullBtn" class="controlBtn" onclick="toggleFullscreen()">â›¶ Fullscreen</button>
          <div class="progressSmall" id="progressSmall">0 / 0</div>
        </div>
      </section>

    </main>
  </div>

  <script>
    /* ===========================
       Data: English 7 & CNF 12
       =========================== */
    const DATA = {
      eng7: [
{q:"What is the sequence of events in a story called?", a:["Climax","Plot","Resolution","Theme"]},
{q:"Which element of a short story refers to the time and place in which the story occurs?", a:["Character","Plot","Setting","Theme"]},
{q:"How does the climax differ from the resolution in a story?", a:["Climax builds tension, while resolution complicates the plot.","Climax introduces the setting, while resolution provides suspense.","Climax is the turning point, while resolution wraps up the story.","Climax resolves the story, while resolution introduces characters."]},
{q:"What is the importance of the theme in a short story?", a:["It develops the plot","It provides the setting","It serves as the moral or message","It shows the conflict"]},
{q:"If a short story is missing its resolution, what will likely happen?", a:["The characters will remain static.","The climax will not occur.","The story will be confusing and unresolved.","The theme will be unimportant."]},
{q:"Which element would be most affected if the storyâ€™s setting were different?", a:["Characterization","Climax","Conflict","Theme"]},
{q:"How does the protagonistâ€™s conflict help in developing the theme of a story?", a:["It adds suspense to the plot.","It brings the characters together.","It complicates the resolution.","It highlights the moral of the story."]},
{q:"Imagine a story where a setting of war leads to a theme of survival. What could be a possible climax?", a:["The protagonist finds safety.","The protagonist meets the antagonist.","The protagonist questions his choices.","The protagonistâ€™s friend betrays him."]},
{q:"Who is the author of My Father Goes to Court?", a:["Carlos Bulosan","Francisco Arcellana","Jose Garcia Villa","Nick Joaquin"]},
{q:"What type of court case is involved in My Father Goes to Court?", a:["Civil","Criminal","Family","Property"]},
{q:"What is the central conflict in My Father Goes to Court?", a:["A land dispute between two families.","The children are caught stealing from neighbors.","The father is accused of stealing the rich familyâ€™s food.","The father wants compensation for his labor."]},
{q:"How does the narratorâ€™s father respond to the accusation from the rich family?", a:["He apologized to the family.","He denies it.","He mocks the rich familyâ€™s greed.","He pays them in food."]},
{q:"If you were to defend the father in court, which argument would you present?", a:["The family only enjoyed the aroma of the food.","The father admitted guilt and apologized.","The father offered to pay for the rich familyâ€™s loss.","The children confessed to stealing the food."]},
{q:"Why is the story set in a courtroom?", a:["To create tension between the families.","To emphasize the seriousness of the accusation.","To introduce new characters.","To provide a humorous resolution."]},
{q:"Do you think the fatherâ€™s actions were justified in the end?", a:["No, because they disrespected the court.","No, because the family benefited from the rich.","Yes, because the family didnâ€™t actually steal.","Yes, because the rich family overreacted."]},
{q:"How might the story have ended if the rich family had accepted the fatherâ€™s explanation?", a:["The children would have been sent to jail.","The rich family would have demanded payment.","The poor family would have moved away.","The two families might have reconciled."]},
{q:"What term refers to the method an author uses to develop characters in a story?", a:["Characterization","Climax","Conflict","Setting"]},
{q:"Which of the following is a method of direct characterization?", a:["Describing the characterâ€™s appearance.","Revealing the characterâ€™s action.","The characterâ€™s internal conflict.","The characterâ€™s thoughts."]},
{q:"What does it mean when a character is described as 'dynamic'?", a:["The character changes throughout the story.","The character is the main antagonist.","The character is only briefly mentioned.","The character stays the same."]},
{q:"How does indirect characterization differ from direct characterization?", a:["Direct tells the reader traits, indirect shows through behavior.","Direct focuses on conflict, indirect focuses on theme.","Direct uses dialogue, indirect uses settings.","Direct reveals traits through action, indirect through thoughts."]},
{q:"If a character is described as 'timid' but then confronts the antagonist, what type of characterization is being shown?", a:["Direct","Flat","Indirect","Static"]},
{q:"In what way can a characterâ€™s internal conflicts add depth to their development?", a:["It creates additional antagonist.","It helps reveal the storyâ€™s resolution.","It highlights their personal growth.","It reflects their external struggles."]},
{q:"Is it better for a character to be static or dynamic? Why?", a:["Dynamic, because change creates more engaging stories.","Dynamic, because they serve as the antagonist.","Static, because they help drive the plot forward.","Static, because consistency makes them easier to follow."]},
{q:"What type of character does not undergo significant change throughout the story?", a:["Dynamic","Flat","Round","Static"]},
{q:"Which type of character has complex and multi-dimensional traits?", a:["Antagonist","Flat","Round","Static"]},
{q:"How does a flat character differ from a round character?", a:["A flat character is fully developed, while a round character is not.","A flat character is static, while a round character can change.","A flat character is one-dimensional, while a round character has depth.","A flat character is the protagonist, while a round character is the antagonist."]},
{q:"If a character is presented as wise and serves as a mentor, what type of character are they likely to be?", a:["Antagonist","Flat","Round","Static"]},
{q:"How can an antagonist drive the plot forward?", a:["By creating obstacles for the protagonist.","By having a minor role in the story.","By being static and unchanging.","By serving as comic relief."]},
{q:"Imagine a character who starts off as a sidekick but becomes the main protagonist. What does this change indicate?", a:["The character is a flat character.","The character is dynamic.","The character lacks depth.","The character is static."]},
{q:"Are flat characters necessary for a story?", a:["No, they distract from the main plot.","Yes, they provide contrast to round characters.","Yes, they make the story predictable.","No, they are never important."]},
{q:"What type of conflict is involved when Ana struggles to decide whether to follow her parents' expectations or pursue her own dreams of becoming an artist?", a:["Man vs Man","Man vs Nature","Man vs Self","Man vs Society"]},
{q:"If Miguel is caught in a strong typhoon while trying to get home from school, what type of conflict is he facing?", a:["Man vs Nature","Man vs Self","Man vs Society","Man vs Technology"]},
{q:"In a story where Ramon is protesting against a new law that limits the rights of farmers, what type of conflict is shown?", a:["Man vs Nature","Man vs Self","Man vs Society","Man vs Technology"]},
{q:"If Maria is trying to choose between accepting a scholarship abroad or staying to help her family with their business, what kind of conflict is she experiencing?", a:["Man vs Man","Man vs Nature","Man vs Self","Man vs Society"]},
{q:"Joshua is having an argument with his best friend, Paul, about who should lead the group project. What type of conflict does this represent?", a:["Man vs Man","Man vs Nature","Man vs Self","Man vs Society"]},
{q:"In a situation where Liza tries to convince the barangay officials to allow her to organize a feeding program for street children, but they deny her request, what type of conflict is present?", a:["Man vs Nature","Man vs Self","Man vs Society","Character vs Technology"]},
{q:"How does Nicoâ€™s internal struggle to study for exams while also wanting to play online games contribute to his characterâ€™s development in a story?", a:["It creates more external problems in the plot.","It resolves the external conflict early.","It reveals his personal growth and decision-making process.","It shows his external conflict with others."]},
{q:"What is the primary purpose of narrative texts?", a:["To inform","To entertain","To persuade","To analyze"]},
{q:"Which type of literary text primarily seeks to present factual information?", a:["Fiction","Non-Fiction","Poetry","Drama"]},
{q:"What is the main purpose of a fable?", a:["To entertain through dialogue.","To express emotions through poetry.","To inform the reader of historical facts.","To teach a moral lesson."]},
{q:"What is the purpose of a diary entry?", a:["To persuade the reader to take a stand.","To present arguments in favor of an issue.","To record personal thoughts and experiences.","To teach a lesson about life."]},
{q:"Which of the following is considered a dramatic literary form?", a:["Drama","Editorial","News Article","Speech"]},
{q:"If you are writing a blog to share your daily experiences as a student, what types of literary text are you using?", a:["Expository","Descriptive","Narrative","Persuasive"]},
{q:"If an author writes a legend about a local hero, what is the primary purpose of the text?", a:["To entertain with fictional elements and heroic deeds.","To inform readers about historical facts.","To record everyday events.","To teach a moral lesson."]},
{q:"I wanted to go for a walk, _________ it started raining.", a:["And","But","Nevertheless","Therefore"]},
{q:"She loves to read novels; ____________, she often spends hours at the library.", a:["Consequently","Finally","Moreover","Therefore"]},
{q:"I wanted to buy a new phone; __________, I didn't have enough money at the time.", a:["As a result","Consequently","However","Therefore"]},
{q:"We missed the bus; ___________ we walked to school instead.", a:["As a result","But","Consequently","However"]},
{q:"She called her mother, and ________ she sent a message to her friends to let them know.", a:["Afterwards","Finally","Then","Therefore"]},
{q:"____________, I had visited that museum, but it had changed a lot since then.", a:["First","Because","Previously","Whereas"]},
      ],
      cnf12: [
{q:"What is the primary purpose of creative nonfiction?", a:["To inform the reader","To persuade the reader","To entertain with fictional stories","To present facts with a narrative style"]},
{q:"Which of the following is an example of creative nonfiction?", a:["Autobiography","Historical drama","Mythology","Science fiction"]},
{q:"Who is the \"I\" in a first-person narrative?", a:["The antagonist","The author","The narrator","The protagonist"]},
{q:"What element is essential in creative nonfiction?", a:["Fantasy world-building","Imaginary plot","Mythical characters","Real-life experiences"]},
{q:"What does the term \"memoir\" refer to?", a:["A collection of poems","A fictional story","A news article","A personal account of events"]},
{q:"How does creative nonfiction combine factual accuracy with storytelling?", a:["By using fictional dialogue","By adding fictional elements","By using artistic storytelling","By creating unrealistic settings"]},
{q:"How does descriptive language function in creative nonfiction?", a:["It simplifies the text","It confuses the reader","It adds fictional elements","It paints vivid pictures in the mind"]},
{q:"What is a common feature of a personal essay?", a:["Imaginary characters","Objective analysis","Personal reflection","Scientific data"]},
{q:"What BEST defines a \"narrative\"?", a:["A list of facts","A chronological story","A persuasive argument","A collection of opinions"]},
{q:"How is the author expected to approach the truth in creative nonfiction?", a:["By avoiding any personal opinions","By writing in a detached, unemotional style","By inventing facts to make the story interesting","By sticking to the truth while using a creative approach"]},
{q:"Which of the following is NOT a subgenre of creative nonfiction?", a:["Biography","Memoir","Personal essay","Science fiction"]},
{q:"Why is tone important in creative nonfiction?", a:["It is irrelevant in nonfiction","It distracts the reader from the facts","It hides the true meaning of the text","It sets the mood and conveys the author's attitude"]},
{q:"Which point of view is commonly used in memoirs?", a:["First-person","Second-person","Third-person limited","Third-person omniscient"]},
{q:"What does the term \"theme\" refer to in creative nonfiction?", a:["The plot's twist","The setting of the story","The characters' dialogue","The underlying message or main idea"]},
{q:"Why is dialogue used in creative nonfiction?", a:["To add humor","To confuse the reader","To create fictional conversations","To show interactions with real people"]},
{q:"How does the relationship between the author and narrator differ in creative nonfiction?", a:["They are always the same person","The author creates a fictional narrator","The narrator is a purely objective observer","The author and narrator may be the same, thus, perspective is crafted for storytelling"]},
{q:"What technique involves recalling and writing about past experiences in creative nonfiction?", a:["Allegory","Flashback","Foreshadowing","Imagery"]},
{q:"What is the primary difference between an autobiography and a memoir?", a:["An autobiography is always shorter than a memoir","An autobiography is fictional, while a memoir is factual","A memoir is written in third-person, while an autobiography is in first-person","An autobiography covers the author's entire life; a memoir focuses on specific events"]},
{q:"What does the term \"literary journalism\" refer to?", a:["Creating fictional news stories","Reporting news in a poetic style","Writing novels based on real events","Writing news articles with a narrative approach"]},
{q:"How is \"voice\" defined in creative nonfiction?", a:["The loudness of the text","The dialogue between characters","The physical voice of the narrator","The author's writing style and personality as conveyed in the text"]},
{q:"What is an example of a structural device used in creative nonfiction?", a:["Alliteration","Hyperbole","Metaphor","Nonlinear narrative"]},
{q:"How does creative nonfiction differ from traditional nonfiction?", a:["It focuses more on academic writing","It uses fictional elements to tell a story","It blends factual accuracy and narrative storytelling techniques","It relies solely on factual reporting without any creative embellishment"]},
{q:"Why is symbolism used in creative nonfiction?", a:["To create confusion","To replace factual information","To introduce fictional elements to the story","To provide deeper meaning to real-life events or objects"]},
{q:"How do sensory details function in creative nonfiction?", a:["They are used to create fictional settings","They are unnecessary in nonfiction writing","They distract from the factual accuracy of the story","They enhance the reader's connection to the narrative by appealing to the senses"]},
{q:"How does the author typically present their point of view in a personal essay?", a:["Through the use of fictional characters","By analyzing the perspectives of others","By writing in a detached and objective manner","By sharing their personal experiences and reflections"]},
{q:"What is an example of a hybrid form of creative nonfiction?", a:["Fantasy novel","Historical fiction","Lyric essay","Science report"]},
{q:"How does \"pacing\" affect a creative nonfiction narrative?", a:["It dictates the length of the text","It is irrelevant in nonfiction writing","It refers to the number of characters in the story","It determines how quickly or slowly the narrative unfolds"]},
{q:"How does an author establish credibility in creative nonfiction?", a:["By avoiding personal opinions","By writing in an overly emotional tone","By using highly creative, fictional elements","By thoroughly researching and accurately representing facts"]},
{q:"What is a common challenge in writing creative nonfiction?", a:["Avoiding any personal input","Creating fictional characters","Writing without any emotional engagement","Maintaining factual accuracy while using narrative techniques"]},
{q:"Why is a reflective voice important in a memoir?", a:["To exaggerate details for effect","To describe only external events","To distance the author from the events","To analyze and interpret personal experiences"]},
{q:"What distinguishes literary nonfiction from other types of nonfiction?", a:["Use of factual information","A focus solely on academic writing","An absence of personal perspective","Incorporation of literary techniques such as imagery, metaphor, and symbolism"]},
{q:"What is the significance of \"personal truth\" in creative nonfiction?", a:["It is the same as objective truth","It refers to a fictional version of events","It disregards factual accuracy in favor of storytelling","It emphasizes the subjective experiences and interpretations of the author"]},
{q:"How are ethics important in creative nonfiction writing?", a:["They govern fictional storytelling","They involve the use of satire and irony","They allow creative freedom to alter facts for a better story","They guide the truthful representation of facts and respect for others in writing"]},
{q:"How can an author effectively engage the reader in creative nonfiction?", a:["By avoiding any form of dialogue","By using a dry and objective tone","By strictly following a chronological order","By blending factual content with a compelling narrative"]},
{q:"Why is research important in writing creative nonfiction?", a:["To avoid personal bias","To find fictional elements to enhance the story","To remove any creative elements from the text","To ensure factual accuracy and provide a solid foundation for the narrative"]},
{q:"How can an author maintain narrative tension in a nonfiction story?", a:["By simplifying the plot","By using a nonlinear timeline","By avoiding any form of conflict","By revealing all information at once"]},
{q:"When is it appropriate to use a nonlinear narrative in creative nonfiction?", a:["When the story lacks excitement","When writing a purely factual report","When the author wants to confuse the reader","When it helps to enhance the theme or provide deeper insight"]},
{q:"Why might an author choose to write in second-person point of view in creative nonfiction?", a:["To avoid personal reflection","To make the narrative more formal","To directly involve the reader in the narrative","To create a sense of distance between the author and reader"]},
{q:"What challenge does an author face when writing about sensitive or controversial topics in creative nonfiction?", a:["Deciding whether to fictionalize the story","Ensuring the story is purely entertaining","Avoiding the use of any narrative techniques","Balancing honesty with respect for those involved"]},
{q:"How does the use of metaphors enhance creative nonfiction?", a:["By replacing factual details","By simplifying complex ideas","By adding layers of meaning to the narrative","By distracting the reader from the main point"]},
{q:"What is the role of reflection in a personal essay?", a:["To avoid emotional engagement","To recount events without any analysis","To entertain the reader with fictional elements","To analyze and provide deeper insights into the author's experiences"]},
{q:"Why might an author use multiple perspectives in a piece of creative nonfiction?", a:["To avoid bias","To confuse the reader","To add fictional elements to the narrative","To provide a more comprehensive view of the subject"]},
{q:"How does an author achieve authenticity in creative nonfiction?", a:["By including purely fictional content","By relying solely on other peopleâ€™s accounts","By avoiding personal involvement in the narrative","By staying true to their voice and experiences while representing facts accurately"]},
{q:"Why is it important to consider the audience when writing creative nonfiction?", a:["To avoid using creative language","To limit the use of descriptive details","To ensure the narrative is as simple as possible","To tailor the narrative to their interests and expectations"]},
{q:"What does it mean to \"show, don't tell\" in creative nonfiction writing?", a:["To focus solely on dialogue","To avoid descriptive language","To list facts without elaboration","To describe events with vivid details rather than just stating facts"]},
{q:"How can an author effectively conclude a piece of creative nonfiction?", a:["By introducing new characters","By ending abruptly without resolution","By summarizing every detail in the story","By leaving the reader with a lasting impression or insight"]},
{q:"Why might an author use flashbacks in a creative nonfiction piece?", a:["To confuse the timeline","To introduce fictional elements","To avoid discussing the present","To provide background information or context to current events"]},
{q:"What is a challenge when writing about real people in creative nonfiction?", a:["Creating entirely fictional dialogue","Ensuring the narrative remains fictional","Making the characters seem more realistic","Balancing truthfulness with respect for privacy and sensitivity"]},
{q:"How does the theme of a creative nonfiction piece differ from the plot?", a:["The theme and plot are the same","The theme is a list of characters, while the plot is the setting","The theme is the central idea or message, while the plot is the sequence of events","The theme is the chronological order of events, while the plot is the author's opinion"]}
      ],
      ppg11: [],
      mil12: []
    };

    /* ===========================
       App State
       =========================== */
    let currentSubject = null;
    let currentIndex = 0;
    const TIME_PER_Q = 60;
    let timeLeft = TIME_PER_Q;
    let timerId = null;
    let isPaused = false;

    /* DOM */
    const dashboardEl = document.getElementById('dashboard');
    const startArea = document.getElementById('startArea');
    const startExamBtn = document.getElementById('startExamBtn');
    const presenter = document.getElementById('presenter');
    const timerWrap = document.getElementById('timerWrap');
    const timerText = document.getElementById('timerText');
    const qNumberEl = document.getElementById('qNumber');
    const qTextEl = document.getElementById('qText');
    const optionsEl = document.getElementById('options');
    const progressSmall = document.getElementById('progressSmall');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const restartBtn = document.getElementById('restartBtn');
    const ttsBtn = document.getElementById('ttsBtn');
    const fsBtn = document.getElementById('fsBtn');
    const readBtn = document.getElementById('readBtn');
    const fullBtn = document.getElementById('fullBtn');

    /* ===========================
       Subject selection
       =========================== */
    function selectSubject(id){
      currentSubject = id;
      startArea.style.display = 'block';
      startExamBtn.focus();
    }
    window.selectSubject = selectSubject;

    /* ===========================
       Start / Render / Navigation
       =========================== */
    function startExam(){
      if(!currentSubject) return;
      document.getElementById('dashboard').style.display = 'none';
      document.querySelector('header').style.display = 'none';
      startArea.style.display = 'none';

      presenter.classList.add('active');
      presenter.setAttribute('aria-hidden','false');
      timerWrap.style.display = 'flex';

      // set subject label (small)
      const subjectLabelEl = document.getElementById('subjectLabel');
      if(subjectLabelEl) subjectLabelEl.textContent = 'Subject: ' + (currentSubject === 'eng7' ? 'English 7' : currentSubject);

      currentIndex = 0;
      renderQuestion();
      startTimer();
    }
    window.startExam = startExam;

    function renderQuestion(){
      const questions = DATA[currentSubject] || [];
      if(!questions || questions.length === 0){
        qNumberEl.textContent = 'No questions';
        qTextEl.textContent = 'This subject has no questions loaded.';
        optionsEl.innerHTML = '';
        progressSmall.textContent = '0 / 0';
        return;
      }
      const item = questions[currentIndex];
      qNumberEl.textContent = `Question ${currentIndex+1} of ${questions.length}`;
      qTextEl.textContent = item.q;
      optionsEl.innerHTML = '';
      item.a.forEach((opt,i)=>{
        const div = document.createElement('div');
        div.className = 'option';
        div.textContent = `${String.fromCharCode(65+i)}. ${opt}`;
        optionsEl.appendChild(div);
      });
      progressSmall.textContent = `${currentIndex+1} / ${questions.length}`;
    }

    function prevQuestion(){
      if(currentIndex > 0){
        currentIndex--;
        renderQuestion();
        resetTimer();
        startTimer();
      }
    }
    window.prevQuestion = prevQuestion;

    function nextQuestion(){
      const questions = DATA[currentSubject] || [];
      if(currentIndex < questions.length - 1){
        currentIndex++;
        renderQuestion();
        resetTimer();
        startTimer();
      } else {
        finishPresentation();
      }
    }
    window.nextQuestion = nextQuestion;

    function finishPresentation(){
      stopTimer();
      qNumberEl.textContent = 'Presentation Finished';
      qTextEl.innerHTML = '<strong>End of exam.</strong>';
      optionsEl.innerHTML = '';
      restartBtn.style.display = 'inline-block';
      timerWrap.style.display = 'none';
    }

    function restartExam(){
      restartBtn.style.display = 'none';
      currentIndex = 0;
      renderQuestion();
      resetTimer();
      startTimer();
      timerWrap.style.display = 'flex';
    }
    window.restartExam = restartExam;

    /* ===========================
       Timer + beep at 5s
       =========================== */
    function startTimer(){
      stopTimer();
      isPaused = false;
      pauseBtn.textContent = 'Pause';
      timeLeft = TIME_PER_Q;
      updateTimerUI();
      timerId = setInterval(()=>{
        if(!isPaused){
          timeLeft--;
          updateTimerUI();
          if(timeLeft === 5) playBeep(880,120);
          if(timeLeft <= 0){
            nextQuestion();
          }
        }
      },1000);
    }

    function stopTimer(){ if(timerId){ clearInterval(timerId); timerId = null; } }
    function resetTimer(){ stopTimer(); timeLeft = TIME_PER_Q; updateTimerUI(); }
    function togglePause(){ isPaused = !isPaused; pauseBtn.textContent = isPaused ? 'Resume' : 'Pause'; }
    function updateTimerUI(){ timerText.textContent = `${timeLeft}s`; }

    /* ===========================
       TTS & utilities
       =========================== */
    function speakCurrent(){
      if(!currentSubject) return;
      const questions = DATA[currentSubject] || [];
      if(!questions.length) return;
      const item = questions[currentIndex];
      const text = `${item.q}. Choices: ${item.a.map((c,i)=> `${String.fromCharCode(65+i)}. ${c}`).join('. ')}`;
      speakText(text);
    }
    function speakText(text){
      if(!('speechSynthesis' in window)) return;
      window.speechSynthesis.cancel();
      const u = new SpeechSynthesisUtterance(text);
      u.rate = 0.95;
      u.lang = 'en-US';
      window.speechSynthesis.speak(u);
    }

    ttsBtn.addEventListener('click', speakCurrent);
    readBtn.addEventListener('click', speakCurrent);

    /* ===========================
       Fullscreen
       =========================== */
    function toggleFullscreen(){
      if(!document.fullscreenElement){
        document.documentElement.requestFullscreen?.();
      } else {
        document.exitFullscreen?.();
      }
    }
    window.toggleFullscreen = toggleFullscreen;
    fullBtn.addEventListener('click', toggleFullscreen);
    fsBtn.addEventListener('click', toggleFullscreen);

    /* ===========================
       Beep
       =========================== */
    function playBeep(freq=880,duration=120){
      try{
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const o = ctx.createOscillator();
        const g = ctx.createGain();
        o.type = 'sine';
        o.frequency.value = freq;
        o.connect(g);
        g.connect(ctx.destination);
        o.start();
        g.gain.setValueAtTime(0.0001, ctx.currentTime);
        g.gain.exponentialRampToValueAtTime(0.18, ctx.currentTime + 0.02);
        g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + duration/1000);
        setTimeout(()=>{ o.stop(); ctx.close(); }, duration + 30);
      }catch(e){ console.warn('Beep failed', e); }
    }

    /* ===========================
       Keyboard shortcuts
       =========================== */
    document.addEventListener('keydown',(e)=>{
      if(presenter.classList.contains('active')){
        if(e.key === 'ArrowRight') nextQuestion();
        if(e.key === 'ArrowLeft') prevQuestion();
        if(e.key === ' ') { e.preventDefault(); togglePause(); }
        if(e.key.toLowerCase() === 'r') restartExam();
        if(e.key.toLowerCase() === 'p') speakCurrent();
      }
    });

    /* ===========================
       Hook up start button & expose
       =========================== */
    startExamBtn.addEventListener('click', startExam);
    window.startExam = startExam;
    window.nextQuestion = nextQuestion;
    window.prevQuestion = prevQuestion;
    window.togglePause = togglePause;
    window.restartExam = restartExam;
    window.speakCurrent = speakCurrent;

    /* Accessibility: focus start btn when present */
    startExamBtn.addEventListener('focus', ()=>{ /* noop */ });

  </script>
</body>
</html>
