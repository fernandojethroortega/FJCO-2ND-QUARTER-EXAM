<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Second Quarter Examination â€” Presenter (English 7)</title>
  <style>
    :root{
      --bg:#071634;         /* deep navy */
      --card:#081228;
      --accent:#0ea5a5;     /* teal accent for small UI */
      --gold:#F59E0B;       /* timer highlight */
      --muted:#9aa7bf;
      --text:#ffffff;
      --timer-size:140px;   /* larger timer */
      --timer-gap:28px;     /* space between timer & content */
    }

    html,body{height:100%;}
    body{
      margin:0;
      background:linear-gradient(180deg,var(--bg), #04203a 120%);
      color:var(--text);
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
    }

    .app{width:100%;max-width:1400px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    .brand{display:flex;gap:16px;align-items:center}
    .logo{width:64px;height:64px;border-radius:12px;background:linear-gradient(135deg,#0ea5a5,#2563eb);display:flex;align-items:center;justify-content:center;color:white;font-weight:800;font-size:20px}
    h1{font-size:28px;margin:0;color:var(--text)}
    .subtitle{color:var(--muted);font-size:13px}

    /* Card and dashboard */
    .card{background:transparent;border-radius:12px;padding:18px}
    .dashboard{display:flex;gap:14px;flex-wrap:wrap}
    .subject{flex:1 1 220px;min-width:220px;padding:18px;border-radius:12px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.04);cursor:pointer;display:flex;flex-direction:column;gap:10px}
    .subject h3{margin:0;font-size:20px;color:var(--text)}
    .subject p{margin:0;color:var(--muted);font-size:14px}
    .select-btn{margin-top:8px;padding:12px 16px;background:var(--accent);color:var(--card);border-radius:10px;border:none;font-weight:800;font-size:15px;cursor:pointer}

    /* Presenter section */
    #presenter{display:none;margin-top:18px;position:relative}
    #presenter.active{display:block}

    /* Timer (fixed) */
    #timerWrap{
      position:fixed;
      top:18px;
      left:18px;
      z-index:1200;
      display:flex;
      gap:16px;
      align-items:center;
      pointer-events:auto;
    }
    .timerCircle{
      width:var(--timer-size);
      height:var(--timer-size);
      border-radius:50%;
      background:linear-gradient(180deg,#0b2540, #052033);
      display:grid;
      place-items:center;
      border:10px solid rgba(245,158,11,0.15);
      box-shadow: 0 18px 50px rgba(0,0,0,0.55), inset 0 -8px 30px rgba(0,0,0,0.25);
    }
    .timerText{
      font-size:34px;
      font-weight:900;
      color:var(--gold);
      text-shadow:0 2px 10px rgba(0,0,0,0.6);
    }
    .timerLabel{
      font-size:12px;
      color:var(--muted);
      text-align:center;
      margin-top:6px;
    }
    .tinyControls{display:flex;flex-direction:column;gap:10px}
    .tinyBtn{
      background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      color:var(--text);
      border:1px solid rgba(255,255,255,0.04);
      padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:800;
      min-width:56px;text-align:center;
    }

    /* Presenter body â€” padded so timer never overlaps content */
    .presenterBody{display:flex;gap:28px;align-items:flex-start;padding-left: calc(var(--timer-size) + var(--timer-gap));}

    .slide{
      flex:1;
      background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      border-radius:14px;
      padding:44px 52px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.6);
      border:1px solid rgba(255,255,255,0.03);
    }

    .q-number{color:var(--muted);font-size:16px;margin-bottom:12px;font-weight:700}
    .q-text{
      font-size:44px;          /* enlarged question */
      line-height:1.15;
      margin-bottom:28px;
      font-weight:900;         /* BOLD questions */
      color:var(--text);
      text-shadow: 0 4px 14px rgba(2,6,23,0.6);
    }
    .options{display:block}
    .option{
      margin:14px 0;
      font-size:28px;          /* enlarged choices */
      color:var(--text);
      font-weight:800;
      background: rgba(255,255,255,0.02);
      padding:12px 16px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.02);
      display:inline-block;
    }

    /* Controls column */
    .controls{
      width:340px;
      min-width:260px;
      display:flex;
      flex-direction:column;
      gap:14px;
    }
    .meta{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      padding:16px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.03);
    }
    .meta .info{font-size:15px;color:var(--muted);margin-bottom:6px}
    .nav{display:flex;gap:12px;align-items:center}
    .btn{padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text);cursor:pointer;font-weight:900;font-size:15px}
    .btn.primary{background:var(--gold);color:#071634;border:none;box-shadow:0 8px 18px rgba(245,158,11,0.12)}

    .progressBox{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
    .progressBox .label{font-size:13px;color:var(--muted)}
    .progressBox .value{font-size:22px;font-weight:900;color:var(--text);margin-top:6px;color:var(--gold)}

    /* Small screens */
    @media (max-width:1000px){
      .presenterBody{flex-direction:column;padding-left:16px}
      #timerWrap{left:unset;right:18px;top:18px}
      .timerCircle{width:110px;height:110px}
      .timerText{font-size:28px}
      .q-text{font-size:34px}
      .option{font-size:20px}
      .controls{width:100%}
    }

    /* Accessibility helper */
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="brand">
        <div class="logo">SQ</div>
        <div>
          <h1>Second Quarter Examination</h1>
          <div class="subtitle">Presenter-only â€¢ English 7 â€” 60s per question â€¢ Bold & large</div>
        </div>
      </div>
      <div class="subtitle">Auto-advance â€¢ TTS â€¢ Fullscreen â€¢ Restart</div>
    </header>

    <section class="card">
      <!-- Dashboard -->
      <div id="dashboard" class="dashboard">
        <div class="subject" data-id="eng7">
          <h3>English 7</h3>
          <p>50-item exam â€” ready for presentation</p>
          <button class="select-btn" onclick="selectSubject('eng7')">Select</button>
        </div>
        <div class="subject" data-id="ppg11">
          <h3>PPG 11</h3>
          <p>(empty)</p>
          <button class="select-btn" onclick="selectSubject('ppg11')">Select</button>
        </div>
        <div class="subject" data-id="cnf12">
          <h3>CNF 12</h3>
          <p>(empty)</p>
          <button class="select-btn" onclick="selectSubject('cnf12')">Select</button>
        </div>
        <div class="subject" data-id="mil12">
          <h3>MIL 12</h3>
          <p>(empty)</p>
          <button class="select-btn" onclick="selectSubject('mil12')">Select</button>
        </div>
      </div>

      <!-- Start button -->
      <div id="startArea" style="margin-top:18px; display:none">
        <button id="startExam" class="select-btn" style="font-size:18px;padding:14px 24px" onclick="startExam()">Start Exam</button>
      </div>

      <!-- Presenter (hidden until start) -->
      <div id="presenter" class="presenter" aria-hidden="true" style="margin-top:18px">
        <!-- Timer (fixed) -->
        <div id="timerWrap" style="display:none" aria-hidden="false">
          <div class="timerCircle" role="timer" aria-live="polite">
            <div class="timerText" id="timerText">60s</div>
          </div>
          <div style="display:flex;flex-direction:column;gap:10px;align-items:center">
            <button id="ttsBtn" class="tinyBtn" title="Read question aloud">ðŸ”Š Read</button>
            <button id="fsBtn" class="tinyBtn" title="Toggle full screen">â›¶</button>
            <div class="timerLabel" style="margin-top:6px;color:var(--muted);font-size:12px">Time left</div>
          </div>
        </div>

        <div class="presenterBody" id="presenterBody">
          <div class="slide" id="slide">
            <div class="q-number" id="qNumber">Question 1 of 50</div>
            <div class="q-text" id="qText">Loadingâ€¦</div>
            <div class="options" id="options"></div>
          </div>

          <aside class="controls" aria-hidden="false">
            <div class="meta">
              <div class="info" id="subjectLabel">Subject: â€”</div>
              <div class="info">Time per question: <strong>60s</strong></div>
              <div style="height:8px"></div>

              <div class="nav" style="margin-top:10px">
                <button id="prevBtn" class="btn" onclick="prevQuestion()">â—€ Prev</button>
                <button id="nextBtn" class="btn primary" onclick="nextQuestion()">Next â–¶</button>
              </div>

              <div style="height:10px"></div>
              <div style="display:flex;gap:10px;margin-top:6px">
                <button id="pauseBtn" class="btn" onclick="togglePause()">Pause</button>
                <button id="restartBtn" class="btn" onclick="restartExam()" style="display:none">Restart</button>
              </div>
            </div>

            <div class="progressBox" style="margin-top:12px">
              <div class="label">Progress</div>
              <div class="value" id="progress">0 / 0</div>
            </div>
          </aside>
        </div>
      </div>

    </section>
  </div>

  <script>
    /* ===========================
       Data: English 7 (50 questions)
       =========================== */
    const DATA = {
      eng7: [
{q:"In the story My Father Goes to Court, what is the main reason the father is taken to court?", a:["He stole food from a wealthy family.","He borrowed money and didnâ€™t repay it.","He trespassed on the neighbor's property.","He was accused of enjoying the smell of the rich family's food."]},
{q:"How does the wealthy family in the story behave towards the poor family?", a:["They ignore them completely.","They accuse them of stealing their wealth.","They invite them over for dinner frequently.","They resent them for \"stealing\" the smell of their food."]},
{q:"What is the fatherâ€™s response to the accusations in court?", a:["He pays the family in cash.","He apologizes and promises to pay a fine.","He denies everything and argues with the judge.","He shakes coins in his hand to \"repay\" the family with the sound of money."]},
{q:"What theme is explored in the story \"My Father Goes to Court\"?", a:["The importance of wealth and status","The harm of stealing food from neighbors","The value of family and humor in hard times","The dangers of going to court without a lawyer"]},
{q:"What is the judgeâ€™s reaction to the fatherâ€™s defense in court?", a:["He fines the father.","He finds the situation laughable.","He rules in favor of the wealthy family.","He becomes angry and dismisses the case."]},
{q:"Which of the following is an example of internal conflict?", a:["A village faces destruction after a powerful storm hit.","A firefighter rescues a family from a burning building.","A programmer works to fix a glitch in a new software program.","A student struggles with fear of public speaking before an important presentation."]},
{q:"Which of the following BEST represents man vs. society conflict?", a:["A scientist tries to invent new technology","A hero battles a supernatural creature to save the world","A hiker braves the wilderness to survive after getting lost","A young woman stands up against unjust laws in her town"]},
{q:"In a man vs. technology conflict, what does the main character typically struggles against?", a:["His own beliefs and values","The power of natural disasters","The rules and expectations of society","An advancement of human innovation"]},
{q:"What is the main theme of the story How My Brother Leon Brought Home a Wife?", a:["The challenges of rural life","The sacrifices one makes for love","The importance of family traditions","The struggle of city and rural cultures"]},
{q:"Who is the narrator of the story How My Brother Leon Brought Home a Wife?", a:["Baldo","Labang","Leon","Maria"]},
{q:"How does Baldo feel about Maria as they journey to his home?", a:["He is indifferent","He is openly critical","He is curious and observant","He is skeptical and judgmental"]},
{q:"What test did Leonâ€™s father use to gauge Mariaâ€™s character?", a:["Discussing her views on rural life","Asking her to cook a traditional meal","Observing her interactions with their pet","Sending Baldo and Maria on an alternative, challenging route"]},
{q:"How does Maria react to the countryside and rural setting during her journey with Baldo?", a:["She feels detached and homesick","She expresses hesitation and fear","She appreciates and admires the scenery","She complains about the discomfort"]},
{q:"Bienvenido N. Santos wrote Scent of Apples drawing from his experiences as a Filipino in the United States. During which period did he move to the U.S., influencing the themes of his work?", a:["After World War II","Before World War I","During the 1960s","During the Spanish colonial period"]},
{q:"The story of Scent of Apples reflects the experience of Filipino immigrants in the U.S. during which historical period, when many Filipinos sought opportunities abroad due to limited prospects at home?", a:["Post-World War II","During the Philippine Revolution","During the Philippine-American War","Early American occupation of the Philippines"]},
{q:"What is the primary theme explored in the story Scent of Apples?", a:["The power of friendship","The benefits of technology","The importance of education","The hardships of immigrant life"]},
{q:"In \"Scent of Apples,\" the protagonist reflects on his past. What does the smell of apples symbolize for him?", a:["Success and wealth","Freedom and adventure","Nostalgia and lost dreams","Friendliness and community"]},
{q:"How does the setting of the story contribute to its overall message?", a:["It creates a sense of urgency","It highlights the beauty of nature","It emphasizes the importance of family","It showcases the isolation felt by the protagonist"]},
{q:"What aspect of Filipino culture does Roces primarily emphasize in his essay We Filipinos Are Mild Drinkers?", a:["The influence of Western culture","The importance of family gatherings","The social drinking habits of Filipinos","The culinary traditions of the Philippines"]},
{q:"In \"We Filipinos Are Mild Drinkers,\" how does Roces describe the Filipino attitude towards alcohol consumption?", a:["As a means to escape reality","As a competition among friends","As a necessary part of business deals","As a bonding activity that reflects hospitality"]},
{q:"Which local color element is prominent in Rocesâ€™ portrayal of Filipino drinking culture?", a:["The use of rice as a staple food","The architecture of traditional homes","The geographical landscape of the Philippines","The use of humor and laughter in social interactions"]},
{q:"What underlying theme does Roces convey about Filipino identity through their drinking culture?", a:["Drinking is a sign of weakness","Filipinos cannot handle alcohol","Alcohol consumption is a new trend","Social interactions define Filipino relationships"]},
{q:"How does Roces position Filipino drinking habits in contrast to those of other cultures?", a:["He portrays Filipinos as sober individuals","He suggests Filipinos drink more than others","He implies that Filipinos drink more moderately and socially","He emphasizes that drinking is culturally irrelevant for Filipinos"]},
{q:"Which of the following is the primary purpose of a narrative text?", a:["To inform the reader about a specific topic","To persuade the reader to adopt a particular viewpoint","Both A and B","None of the Above"]},
{q:"What type of literary text is primarily intended to convey information about real events, people, and facts?", a:["Drama","Fiction","Non-fiction","Poetry"]},
{q:"Which literary form is characterized by its use of rhythmic and metaphorical language, often expressing emotions and ideas in a condensed format?", a:["Essay","Novel","Poetry","Short Story"]},
{q:"What is the primary purpose of writing a persuasive text?", a:["Describe experiences","Narrate a fictional story","Provide detailed analyses","Convince the audience to accept viewpoint"]},
{q:"Which of the following BEST describes a drama?", a:["A personal account of real-life experiences","A text meant for reading silently and reflecting","A written work intended for performance, comprising dialogue and action","Both B and C"]},
{q:"Which of the following is the primary purpose of the prewriting stage?", a:["To finalize the written piece","To correct grammatical errors","To generate ideas and plan the content","To format the document for submission"]},
{q:"What is the main goal during the drafting stage?", a:["To proofread and correct mistakes","To ensure that all sources are cited correctly","To improve the vocabulary and style of the piece","To create a rough version of the writing without worrying about perfection"]},
{q:"During which stage of the writing process do writers focus on reorganizing and enhancing the content of their draft?", a:["Drafting","Editing","Prewriting","Revising"]},
{q:"What is the primary focus during the editing stage of the writing process?", a:["Developing a thesis statement","Gathering feedback from peers","Exploring different writing techniques","Correcting grammatical, punctuation, and spelling errors"]},
{q:"Which of the following activities is MOST likely to occur during the prewriting phase?", a:["Reading through a completed draft","Checking for typos in a final version","Outlining main ideas and arguments","Polishing the language style of the writing"]},
{q:"What is the purpose of imagery in poetry?", a:["To add rhymes","To repeat sounds","To use simple language","To create vivid pictures in mind"]},
{q:"What sense is MOST commonly evoked in the line: \"The scent of fresh rain on the earth\"?", a:["Sight","Smell","Sound","Touch"]},
{q:"How does the line \"The wind howled in the night\" use personification?", a:["By using a rhyme","By describing the sound of wind","By giving wind human-like qualities","By comparing wind to a howling animal"]},
{q:"Why do poets use descriptive imagery in their work?", a:["To add rhymes","To confuse the reader","To lengthen the poem","To create vivid pictures or feelings"]},
{q:"What does the form of a poem refer to?", a:["The central idea","The use of sound devices","The figurative language used","The structure and design including rhyme and rhythm"]},
{q:"What is the basic unit of a poem, often characterized by its length and rhythm?", a:["Line","Stanza","Syllable","Word"]},
{q:"How is alliteration BEST described?", a:["As the main idea of a poem","As the repetition of vowel sounds","As a comparison using \"like\" or \"as\"","As the repetition of the same initial consonant sounds"]},
{q:"What is NOT considered a sound device in poetry?", a:["Alliteration","Imagery","Rhyme","Rhythm"]},
{q:"What does the prefix \"anti\" mean?", a:["Against","Before","Not","Over"]},
{q:"What does the suffix \"-less\" in the word \"hopeless\" indicate?", a:["Able to","Full of","In manner of","Lacking"]},
{q:"How can a reader use context clues to understand an unfamiliar word in a poem?", a:["By looking at the title of the poem","By researching the poet's biography","By considering the length of the poem","By examining the surrounding words and phrases"]},
{q:"How does personification enhance a poem?", a:["By comparing unlike things","By repeating consonant sounds","By using exaggerated statements","By giving human qualities to non-human things"]},
{q:"What is the central idea or message of a poem called?", a:["Line","Rhythm","Stanza","Theme"]},
{q:"Why is rhyme important in poetry?", a:["To confuse the reader","To make the poem longer","To create a musical quality","To make the poem more difficult to read"]},
{q:"How does the form of a poem influence its overall structure?", a:["By using imagery","By adding symbolism","By expressing the theme","By determining the rhyme and rhythm"]},
{q:"What characterizes dramatic poetry?", a:["Telling a story","Using complex imagery","Expressing personal emotions","Featuring characters and dialogue"]},
{q:"How is lyric poetry BEST defined?", a:["A poetry that tells a story.","A poetry that is performed on stage.","A poetry that uses strict rhyme schemes.","A poetry that expresses the speaker's personal feelings and thoughts."]}
      ],
      ppg11: [],
      cnf12: [],
      mil12: []
    };

    /* ===========================
       State & DOM
       =========================== */
    let currentSubject = null;
    let currentIndex = 0;
    const TIME_PER_Q = 60;
    let timeLeft = TIME_PER_Q;
    let timerId = null;
    let isPaused = false;

    const dashboard = document.getElementById('dashboard');
    const startArea = document.getElementById('startArea');
    const startExamBtn = document.getElementById('startExam');
    const presenter = document.getElementById('presenter');
    const timerWrap = document.getElementById('timerWrap');
    const timerText = document.getElementById('timerText');
    const qNumberEl = document.getElementById('qNumber');
    const qTextEl = document.getElementById('qText');
    const optionsEl = document.getElementById('options');
    const subjectLabel = document.getElementById('subjectLabel');
    const progressEl = document.getElementById('progress');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const restartBtn = document.getElementById('restartBtn');
    const ttsBtn = document.getElementById('ttsBtn');
    const fsBtn = document.getElementById('fsBtn');

    /* ===========================
       Subject selection
       =========================== */
    function selectSubject(id){
      currentSubject = id;
      startArea.style.display = 'block';
      startExamBtn.focus();
    }
    window.selectSubject = selectSubject;

    /* ===========================
       Start / Render / Navigation
       =========================== */
    function startExam(){
      if(!currentSubject) return;
      // hide dashboard and header to show only exam
      document.querySelector('.dashboard').style.display = 'none';
      document.querySelector('header').style.display = 'none';
      startArea.style.display = 'none';

      presenter.classList.add('active');
      presenter.setAttribute('aria-hidden','false');
      timerWrap.style.display = 'flex';

      subjectLabel.textContent = 'Subject: ' + (currentSubject === 'eng7' ? 'English 7' : currentSubject);
      currentIndex = 0;
      renderQuestion();
      startTimer();
    }
    window.startExam = startExam;

    function renderQuestion(){
      const questions = DATA[currentSubject] || [];
      if(!questions || questions.length === 0){
        qNumberEl.textContent = 'No questions';
        qTextEl.textContent = 'This subject has no questions loaded.';
        optionsEl.innerHTML = '';
        return;
      }
      const item = questions[currentIndex];
      qNumberEl.textContent = `Question ${currentIndex+1} of ${questions.length}`;
      qTextEl.textContent = item.q;
      optionsEl.innerHTML = '';
      item.a.forEach((opt,i)=>{
        const div = document.createElement('div');
        div.className = 'option';
        div.textContent = `${String.fromCharCode(65+i)}. ${opt}`;
        optionsEl.appendChild(div);
      });
      updateProgress();
    }

    function prevQuestion(){
      if(currentIndex > 0){
        currentIndex--;
        renderQuestion();
        resetTimer();
        startTimer();
      }
    }
    window.prevQuestion = prevQuestion;

    function nextQuestion(){
      const questions = DATA[currentSubject] || [];
      if(currentIndex < questions.length - 1){
        currentIndex++;
        renderQuestion();
        resetTimer();
        startTimer();
      } else {
        finishPresentation();
      }
    }
    window.nextQuestion = nextQuestion;

    function finishPresentation(){
      stopTimer();
      qNumberEl.textContent = 'Presentation Finished';
      qTextEl.innerHTML = '<strong>End of exam.</strong>';
      optionsEl.innerHTML = '';
      restartBtn.style.display = 'inline-block';
      timerWrap.style.display = 'none';
    }

    function restartExam(){
      restartBtn.style.display = 'none';
      currentIndex = 0;
      renderQuestion();
      resetTimer();
      startTimer();
      timerWrap.style.display = 'flex';
    }
    window.restartExam = restartExam;

    /* ===========================
       Timer (with 5s beep)
       =========================== */
    function startTimer(){
      stopTimer();
      isPaused = false;
      pauseBtn.textContent = 'Pause';
      timeLeft = TIME_PER_Q;
      updateTimerUI();
      timerId = setInterval(()=>{
        if(!isPaused){
          timeLeft--;
          updateTimerUI();
          if(timeLeft === 5) playBeep(880,120);
          if(timeLeft <= 0){
            nextQuestion();
          }
        }
      },1000);
    }

    function stopTimer(){ if(timerId){ clearInterval(timerId); timerId = null; } }
    function resetTimer(){ stopTimer(); timeLeft = TIME_PER_Q; updateTimerUI(); }
    function togglePause(){ isPaused = !isPaused; pauseBtn.textContent = isPaused ? 'Resume' : 'Pause'; }
    function updateTimerUI(){ timerText.textContent = `${timeLeft}s`; }

    /* ===========================
       Progress & utilities
       =========================== */
    function updateProgress(){
      const questions = DATA[currentSubject] || [];
      progressEl.textContent = `${currentIndex+1} / ${questions.length}`;
    }

    /* ===========================
       Text-to-Speech
       =========================== */
    function speakCurrent(){
      if(!currentSubject) return;
      const questions = DATA[currentSubject] || [];
      if(!questions.length) return;
      const item = questions[currentIndex];
      const text = `${item.q}. Choices: ${item.a.map((c,i)=> `${String.fromCharCode(65+i)}. ${c}`).join('. ')}`;
      speakText(text);
    }
    function speakText(text){
      if(!('speechSynthesis' in window)) return;
      window.speechSynthesis.cancel();
      const u = new SpeechSynthesisUtterance(text);
      u.rate = 0.95;
      u.lang = 'en-US';
      window.speechSynthesis.speak(u);
    }
    ttsBtn.addEventListener('click', speakCurrent);
    window.speakCurrent = speakCurrent;

    /* ===========================
       Fullscreen
       =========================== */
    fsBtn.addEventListener('click', ()=>{
      if(!document.fullscreenElement){
        document.documentElement.requestFullscreen?.();
      } else {
        document.exitFullscreen?.();
      }
    });

    /* ===========================
       Beep using WebAudio
       =========================== */
    function playBeep(freq=880,duration=120){
      try{
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const o = ctx.createOscillator();
        const g = ctx.createGain();
        o.type = 'sine';
        o.frequency.value = freq;
        o.connect(g);
        g.connect(ctx.destination);
        o.start();
        g.gain.setValueAtTime(0.0001, ctx.currentTime);
        g.gain.exponentialRampToValueAtTime(0.18, ctx.currentTime + 0.02);
        g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + duration/1000);
        setTimeout(()=>{ o.stop(); ctx.close(); }, duration + 30);
      }catch(e){ console.warn('Beep failed', e); }
    }

    /* ===========================
       Keyboard shortcuts
       =========================== */
    document.addEventListener('keydown', (e)=>{
      if(presenter.classList.contains('active')){
        if(e.key === 'ArrowRight') nextQuestion();
        if(e.key === 'ArrowLeft') prevQuestion();
        if(e.key === ' ') { e.preventDefault(); togglePause(); }
        if(e.key.toLowerCase() === 'r') restartExam();
        if(e.key.toLowerCase() === 'p') speakCurrent();
      }
    });

    /* ===========================
       Expose for inline onclicks
       =========================== */
    window.startExam = startExam;
    window.nextQuestion = nextQuestion;
    window.prevQuestion = prevQuestion;
    window.togglePause = togglePause;
    window.restartExam = restartExam;

    /* ===========================
       Accessibility: focus start button when available
       =========================== */
    const startBtn = document.getElementById('startExam');
    if(startBtn){ startBtn.addEventListener('focus', ()=>{}); }

    /* ===========================
       End of script
       =========================== */
  </script>
</body>
</html>
